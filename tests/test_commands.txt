Step 1 - Create enviroment:
conda env create -f environment.yml

Step 2 - Activate the enviroment:
conda activate mlops_group8

Step 3 - Run entire pipeline:

Step 4 - Run tests for entire pipeline:

Test Command:
python -m pytest -v

Output:
======================================================== test session starts =========================================================
platform darwin -- Python 3.12.2, pytest-8.3.5, pluggy-1.5.0 -- /opt/homebrew/Caskroom/miniconda/base/bin/python
cachedir: .pytest_cache
rootdir: /Users/adriansoto/Library/CloudStorage/GoogleDrive-adrian.soto6@gmail.com/My Drive/Maestria/Academics/Term 3/MLOps/mlops_group8
configfile: pytest.ini
plugins: anyio-4.9.0
collected 43 items                                                                                                                   

tests/test_data_loader.py::test_load_data_csv_success PASSED                                                                   [  2%]
tests/test_data_loader.py::test_load_data_missing_file PASSED                                                                  [  4%]
tests/test_data_loader.py::test_load_data_unsupported_type PASSED                                                              [  6%]
tests/test_data_loader.py::test_load_data_no_path PASSED                                                                       [  9%]
tests/test_data_validator.py::test_validate_data_happy_path PASSED                                                             [ 11%]
tests/test_data_validator.py::test_validate_data_missing_required_column PASSED                                                [ 13%]
tests/test_data_validator.py::test_validate_data_invalid_dtype PASSED                                                          [ 16%]
tests/test_data_validator.py::test_validate_data_out_of_range PASSED                                                           [ 18%]
tests/test_data_validator.py::test_validate_data_disabled PASSED                                                               [ 20%]
tests/test_data_validator.py::test_validate_data_missing_schema_key PASSED                                                     [ 23%]
tests/test_evaluator.py::test_calculate_mape_basic PASSED                                                                      [ 25%]
tests/test_evaluator.py::test_calculate_mape_with_zeros_in_true PASSED                                                         [ 27%]
tests/test_evaluator.py::test_calculate_mape_all_zeros_in_true PASSED                                                          [ 30%]
tests/test_evaluator.py::test_calculate_mape_empty_input PASSED                                                                [ 32%]
tests/test_evaluator.py::test_round_metrics_dict_basic PASSED                                                                  [ 34%]
tests/test_evaluator.py::test_round_metrics_dict_nested PASSED                                                                 [ 37%]
tests/test_evaluator.py::test_calculate_regression_metrics_basic PASSED                                                        [ 39%]
tests/test_evaluator.py::test_calculate_regression_metrics_perfect_fit PASSED                                                  [ 41%]
tests/test_evaluator.py::test_calculate_regression_metrics_adj_r2_edge_case PASSED                                             [ 44%]
tests/test_evaluator.py::test_calculate_regression_metrics_value_error_length_mismatch PASSED                                  [ 46%]
tests/test_evaluator.py::test_calculate_regression_metrics_empty_input PASSED                                                  [ 48%]
tests/test_evaluator.py::test_evaluate_statsmodels_model_runs_and_returns_metrics PASSED                                       [ 51%]
tests/test_evaluator.py::test_evaluate_statsmodels_model_no_selected_features PASSED                                           [ 53%]
tests/test_evaluator.py::test_evaluate_statsmodels_model_empty_eval_data PASSED                                                [ 55%]
tests/test_evaluator.py::test_evaluate_statsmodels_model_index_mismatch PASSED                                                 [ 58%]
tests/test_evaluator.py::test_evaluate_statsmodels_model_prediction_error PASSED                                               [ 60%]
tests/test_features.py::test_parse_genres_creates_columns PASSED                                                               [ 62%]
tests/test_features.py::test_drop_irrelevant_columns_removes PASSED                                                            [ 65%]
tests/test_features.py::test_create_polynomial_features_adds_columns PASSED                                                    [ 67%]
tests/test_features.py::test_select_features_excludes_and_profiles PASSED                                                      [ 69%]
tests/test_features.py::test_log_feature_list_creates_file PASSED                                                              [ 72%]
tests/test_features.py::test_main_features_e2e PASSED                                                                          [ 74%]
tests/test_inferencer.py::test_run_inference_successful PASSED                                                                 [ 76%]
tests/test_model.py::test_validate_modeling_config_raises_keyerror PASSED                                                      [ 79%]
tests/test_model.py::test_stepwise_selection_selects_relevant_features PASSED                                                  [ 81%]
tests/test_model.py::test_train_linear_regression_returns_model_and_features PASSED                                            [ 83%]
tests/test_model.py::test_main_modeling_e2e PASSED                                                                             [ 86%]
tests/test_preprocessing.py::test_validate_preprocessing_config_raises_for_missing_top_level_keys PASSED                       [ 88%]
tests/test_preprocessing.py::test_validate_preprocessing_config_warns_missing_sub_keys PASSED                                  [ 90%]
tests/test_preprocessing.py::test_drop_columns_removes_specified PASSED                                                        [ 93%]
tests/test_preprocessing.py::test_remove_outliers_iqr_removes_rows PASSED                                                      [ 95%]
tests/test_preprocessing.py::test_scale_columns_minmax PASSED                                                                  [ 97%]
tests/test_preprocessing.py::test_main_preprocessing_e2e PASSED                                                                [100%]

========================================================= 43 passed in 2.49s =========================================================


Optional Step - Run tests module by module:

## Data Loader

Command:
python -m src.data_load.data_loader

Output:
2025-06-01 16:38:11,247 - INFO - __main__ - Loaded data from data/raw/Songs_2025.csv (csv), shape=(2300, 19)
2025-06-01 16:38:11,248 - INFO - root - Data loaded successfully. Shape: (2300, 19)

Test Command:
python -m pytest tests/test_data_loader.py -v

Output:
================================================================= test session starts ==================================================================
platform darwin -- Python 3.10.17, pytest-8.3.5, pluggy-1.6.0 -- /opt/homebrew/Caskroom/miniconda/base/envs/mlops_group8/bin/python
cachedir: .pytest_cache
rootdir: /Users/adriansoto/Library/CloudStorage/GoogleDrive-adrian.soto6@gmail.com/My Drive/Maestria/Academics/Term 3/MLOps/mlops_group8
configfile: pytest.ini
plugins: dotenv-0.5.2, cov-6.1.1
collected 4 items                                                                                                                                      

tests/test_data_loader.py::test_load_data_csv_success PASSED                                                                                     [ 25%]
tests/test_data_loader.py::test_load_data_missing_file PASSED                                                                                    [ 50%]
tests/test_data_loader.py::test_load_data_unsupported_type PASSED                                                                                [ 75%]
tests/test_data_loader.py::test_load_data_no_path PASSED                                                                                         [100%]

================================================================== 4 passed in 0.20s ===================================================================

## Data Validator

Command:
python -m src.data_validation.data_validator data/raw/Songs_2025.csv config.yaml

Output:
No output

Test Command:
python -m pytest tests/test_data_validator.py -v

Output:
================================================================= test session starts ==================================================================
platform darwin -- Python 3.10.17, pytest-8.3.5, pluggy-1.6.0 -- /opt/homebrew/Caskroom/miniconda/base/envs/mlops_group8/bin/python
cachedir: .pytest_cache
rootdir: /Users/adriansoto/Library/CloudStorage/GoogleDrive-adrian.soto6@gmail.com/My Drive/Maestria/Academics/Term 3/MLOps/mlops_group8
configfile: pytest.ini
plugins: dotenv-0.5.2, cov-6.1.1
collected 6 items                                                                                                                                      

tests/test_data_validator.py::test_validate_data_happy_path PASSED                                                                               [ 16%]
tests/test_data_validator.py::test_validate_data_missing_required_column PASSED                                                                  [ 33%]
tests/test_data_validator.py::test_validate_data_invalid_dtype PASSED                                                                            [ 50%]
tests/test_data_validator.py::test_validate_data_out_of_range PASSED                                                                             [ 66%]
tests/test_data_validator.py::test_validate_data_disabled PASSED                                                                                 [ 83%]
tests/test_data_validator.py::test_validate_data_missing_schema_key PASSED                                                                       [100%]

================================================================== 6 passed in 0.25s ===================================================================


## Features
Command:
python -m src.features.features

Output: 
2025-06-01 17:33:45 - INFO - __main__ - Starting feature engineering stage...
2025-06-01 17:33:45 - INFO - __main__ - Parsing and engineering genre features...
2025-06-01 17:33:45 - INFO - __main__ - Created genre feature: genre_pop
2025-06-01 17:33:45 - INFO - __main__ - Created genre feature: genre_rock
2025-06-01 17:33:45 - INFO - __main__ - Created genre feature: genre_electronic
2025-06-01 17:33:45 - INFO - __main__ - Created genre feature: genre_latin
2025-06-01 17:33:45 - INFO - __main__ - Created genre feature: genre_hip-hop
2025-06-01 17:33:45 - INFO - __main__ - Created genre feature: genre_indie
2025-06-01 17:33:45 - INFO - __main__ - Created genre feature: genre_jazz
2025-06-01 17:33:45 - INFO - __main__ - Created genre feature: genre_r&b
2025-06-01 17:33:45 - INFO - __main__ - Created genre feature: genre_soul
2025-06-01 17:33:45 - INFO - __main__ - Created genre feature: genre_metal
2025-06-01 17:33:45 - INFO - __main__ - Created genre feature: genre_classic
2025-06-01 17:33:45 - INFO - __main__ - Created genre feature: genre_country
2025-06-01 17:33:45 - INFO - __main__ - Dropping irrelevant columns: ['track_name', 'album', 'artist_name', 'cluster', 'artist_genres', 'year']
2025-06-01 17:33:45 - INFO - __main__ - Created polynomial audio features: ['poly_audio_danceability', 'poly_audio_energy', 'poly_audio_liveness', 'poly_audio_loudness', 'poly_audio_speechiness', 'poly_audio_tempo', 'poly_audio_valence', 'poly_audio_duration_ms', 'poly_audio_artist_popularity', 'poly_audio_danceability^2', 'poly_audio_danceability energy', 'poly_audio_danceability liveness', 'poly_audio_danceability loudness', 'poly_audio_danceability speechiness', 'poly_audio_danceability tempo', 'poly_audio_danceability valence', 'poly_audio_danceability duration_ms', 'poly_audio_danceability artist_popularity', 'poly_audio_energy^2', 'poly_audio_energy liveness', 'poly_audio_energy loudness', 'poly_audio_energy speechiness', 'poly_audio_energy tempo', 'poly_audio_energy valence', 'poly_audio_energy duration_ms', 'poly_audio_energy artist_popularity', 'poly_audio_liveness^2', 'poly_audio_liveness loudness', 'poly_audio_liveness speechiness', 'poly_audio_liveness tempo', 'poly_audio_liveness valence', 'poly_audio_liveness duration_ms', 'poly_audio_liveness artist_popularity', 'poly_audio_loudness^2', 'poly_audio_loudness speechiness', 'poly_audio_loudness tempo', 'poly_audio_loudness valence', 'poly_audio_loudness duration_ms', 'poly_audio_loudness artist_popularity', 'poly_audio_speechiness^2', 'poly_audio_speechiness tempo', 'poly_audio_speechiness valence', 'poly_audio_speechiness duration_ms', 'poly_audio_speechiness artist_popularity', 'poly_audio_tempo^2', 'poly_audio_tempo valence', 'poly_audio_tempo duration_ms', 'poly_audio_tempo artist_popularity', 'poly_audio_valence^2', 'poly_audio_valence duration_ms', 'poly_audio_valence artist_popularity', 'poly_audio_duration_ms^2', 'poly_audio_duration_ms artist_popularity', 'poly_audio_artist_popularity^2']
2025-06-01 17:33:45 - INFO - __main__ - Created polynomial genre features: ['poly_genre_genre_pop', 'poly_genre_genre_rock', 'poly_genre_genre_electronic', 'poly_genre_genre_latin', 'poly_genre_genre_hip-hop', 'poly_genre_genre_indie', 'poly_genre_genre_jazz', 'poly_genre_genre_r&b', 'poly_genre_genre_soul', 'poly_genre_genre_metal', 'poly_genre_genre_classic', 'poly_genre_genre_country', 'poly_genre_genre_pop^2', 'poly_genre_genre_pop genre_rock', 'poly_genre_genre_pop genre_electronic', 'poly_genre_genre_pop genre_latin', 'poly_genre_genre_pop genre_hip-hop', 'poly_genre_genre_pop genre_indie', 'poly_genre_genre_pop genre_jazz', 'poly_genre_genre_pop genre_r&b', 'poly_genre_genre_pop genre_soul', 'poly_genre_genre_pop genre_metal', 'poly_genre_genre_pop genre_classic', 'poly_genre_genre_pop genre_country', 'poly_genre_genre_rock^2', 'poly_genre_genre_rock genre_electronic', 'poly_genre_genre_rock genre_latin', 'poly_genre_genre_rock genre_hip-hop', 'poly_genre_genre_rock genre_indie', 'poly_genre_genre_rock genre_jazz', 'poly_genre_genre_rock genre_r&b', 'poly_genre_genre_rock genre_soul', 'poly_genre_genre_rock genre_metal', 'poly_genre_genre_rock genre_classic', 'poly_genre_genre_rock genre_country', 'poly_genre_genre_electronic^2', 'poly_genre_genre_electronic genre_latin', 'poly_genre_genre_electronic genre_hip-hop', 'poly_genre_genre_electronic genre_indie', 'poly_genre_genre_electronic genre_jazz', 'poly_genre_genre_electronic genre_r&b', 'poly_genre_genre_electronic genre_soul', 'poly_genre_genre_electronic genre_metal', 'poly_genre_genre_electronic genre_classic', 'poly_genre_genre_electronic genre_country', 'poly_genre_genre_latin^2', 'poly_genre_genre_latin genre_hip-hop', 'poly_genre_genre_latin genre_indie', 'poly_genre_genre_latin genre_jazz', 'poly_genre_genre_latin genre_r&b', 'poly_genre_genre_latin genre_soul', 'poly_genre_genre_latin genre_metal', 'poly_genre_genre_latin genre_classic', 'poly_genre_genre_latin genre_country', 'poly_genre_genre_hip-hop^2', 'poly_genre_genre_hip-hop genre_indie', 'poly_genre_genre_hip-hop genre_jazz', 'poly_genre_genre_hip-hop genre_r&b', 'poly_genre_genre_hip-hop genre_soul', 'poly_genre_genre_hip-hop genre_metal', 'poly_genre_genre_hip-hop genre_classic', 'poly_genre_genre_hip-hop genre_country', 'poly_genre_genre_indie^2', 'poly_genre_genre_indie genre_jazz', 'poly_genre_genre_indie genre_r&b', 'poly_genre_genre_indie genre_soul', 'poly_genre_genre_indie genre_metal', 'poly_genre_genre_indie genre_classic', 'poly_genre_genre_indie genre_country', 'poly_genre_genre_jazz^2', 'poly_genre_genre_jazz genre_r&b', 'poly_genre_genre_jazz genre_soul', 'poly_genre_genre_jazz genre_metal', 'poly_genre_genre_jazz genre_classic', 'poly_genre_genre_jazz genre_country', 'poly_genre_genre_r&b^2', 'poly_genre_genre_r&b genre_soul', 'poly_genre_genre_r&b genre_metal', 'poly_genre_genre_r&b genre_classic', 'poly_genre_genre_r&b genre_country', 'poly_genre_genre_soul^2', 'poly_genre_genre_soul genre_metal', 'poly_genre_genre_soul genre_classic', 'poly_genre_genre_soul genre_country', 'poly_genre_genre_metal^2', 'poly_genre_genre_metal genre_classic', 'poly_genre_genre_metal genre_country', 'poly_genre_genre_classic^2', 'poly_genre_genre_classic genre_country', 'poly_genre_genre_country^2']
2025-06-01 17:33:45 - INFO - __main__ - Selected features for modeling: ['danceability', 'key', 'loudness', 'speechiness', 'acousticness', 'liveness', 'valence', 'tempo', 'duration_ms', 'genre_pop', 'genre_rock', 'genre_electronic', 'genre_latin', 'genre_hip-hop', 'genre_indie', 'genre_jazz', 'genre_r&b', 'genre_soul', 'genre_metal', 'genre_classic', 'genre_country', 'poly_audio_danceability', 'poly_audio_energy', 'poly_audio_liveness', 'poly_audio_loudness', 'poly_audio_speechiness', 'poly_audio_tempo', 'poly_audio_valence', 'poly_audio_duration_ms', 'poly_audio_artist_popularity', 'poly_audio_danceability^2', 'poly_audio_danceability energy', 'poly_audio_danceability liveness', 'poly_audio_danceability loudness', 'poly_audio_danceability speechiness', 'poly_audio_danceability tempo', 'poly_audio_danceability valence', 'poly_audio_danceability duration_ms', 'poly_audio_danceability artist_popularity', 'poly_audio_energy^2', 'poly_audio_energy liveness', 'poly_audio_energy loudness', 'poly_audio_energy speechiness', 'poly_audio_energy tempo', 'poly_audio_energy valence', 'poly_audio_energy duration_ms', 'poly_audio_energy artist_popularity', 'poly_audio_liveness^2', 'poly_audio_liveness loudness', 'poly_audio_liveness speechiness', 'poly_audio_liveness tempo', 'poly_audio_liveness valence', 'poly_audio_liveness duration_ms', 'poly_audio_liveness artist_popularity', 'poly_audio_loudness^2', 'poly_audio_loudness speechiness', 'poly_audio_loudness tempo', 'poly_audio_loudness valence', 'poly_audio_loudness duration_ms', 'poly_audio_loudness artist_popularity', 'poly_audio_speechiness^2', 'poly_audio_speechiness tempo', 'poly_audio_speechiness valence', 'poly_audio_speechiness duration_ms', 'poly_audio_speechiness artist_popularity', 'poly_audio_tempo^2', 'poly_audio_tempo valence', 'poly_audio_tempo duration_ms', 'poly_audio_tempo artist_popularity', 'poly_audio_valence^2', 'poly_audio_valence duration_ms', 'poly_audio_valence artist_popularity', 'poly_audio_duration_ms^2', 'poly_audio_duration_ms artist_popularity', 'poly_audio_artist_popularity^2', 'poly_genre_genre_pop', 'poly_genre_genre_rock', 'poly_genre_genre_electronic', 'poly_genre_genre_latin', 'poly_genre_genre_hip-hop', 'poly_genre_genre_indie', 'poly_genre_genre_jazz', 'poly_genre_genre_r&b', 'poly_genre_genre_soul', 'poly_genre_genre_metal', 'poly_genre_genre_classic', 'poly_genre_genre_country', 'poly_genre_genre_pop^2', 'poly_genre_genre_pop genre_rock', 'poly_genre_genre_pop genre_electronic', 'poly_genre_genre_pop genre_latin', 'poly_genre_genre_pop genre_hip-hop', 'poly_genre_genre_pop genre_indie', 'poly_genre_genre_pop genre_jazz', 'poly_genre_genre_pop genre_r&b', 'poly_genre_genre_pop genre_soul', 'poly_genre_genre_pop genre_metal', 'poly_genre_genre_pop genre_classic', 'poly_genre_genre_pop genre_country', 'poly_genre_genre_rock^2', 'poly_genre_genre_rock genre_electronic', 'poly_genre_genre_rock genre_latin', 'poly_genre_genre_rock genre_hip-hop', 'poly_genre_genre_rock genre_indie', 'poly_genre_genre_rock genre_jazz', 'poly_genre_genre_rock genre_r&b', 'poly_genre_genre_rock genre_soul', 'poly_genre_genre_rock genre_metal', 'poly_genre_genre_rock genre_classic', 'poly_genre_genre_rock genre_country', 'poly_genre_genre_electronic^2', 'poly_genre_genre_electronic genre_latin', 'poly_genre_genre_electronic genre_hip-hop', 'poly_genre_genre_electronic genre_indie', 'poly_genre_genre_electronic genre_jazz', 'poly_genre_genre_electronic genre_r&b', 'poly_genre_genre_electronic genre_soul', 'poly_genre_genre_electronic genre_metal', 'poly_genre_genre_electronic genre_classic', 'poly_genre_genre_electronic genre_country', 'poly_genre_genre_latin^2', 'poly_genre_genre_latin genre_hip-hop', 'poly_genre_genre_latin genre_indie', 'poly_genre_genre_latin genre_jazz', 'poly_genre_genre_latin genre_r&b', 'poly_genre_genre_latin genre_soul', 'poly_genre_genre_latin genre_metal', 'poly_genre_genre_latin genre_classic', 'poly_genre_genre_latin genre_country', 'poly_genre_genre_hip-hop^2', 'poly_genre_genre_hip-hop genre_indie', 'poly_genre_genre_hip-hop genre_jazz', 'poly_genre_genre_hip-hop genre_r&b', 'poly_genre_genre_hip-hop genre_soul', 'poly_genre_genre_hip-hop genre_metal', 'poly_genre_genre_hip-hop genre_classic', 'poly_genre_genre_hip-hop genre_country', 'poly_genre_genre_indie^2', 'poly_genre_genre_indie genre_jazz', 'poly_genre_genre_indie genre_r&b', 'poly_genre_genre_indie genre_soul', 'poly_genre_genre_indie genre_metal', 'poly_genre_genre_indie genre_classic', 'poly_genre_genre_indie genre_country', 'poly_genre_genre_jazz^2', 'poly_genre_genre_jazz genre_r&b', 'poly_genre_genre_jazz genre_soul', 'poly_genre_genre_jazz genre_metal', 'poly_genre_genre_jazz genre_classic', 'poly_genre_genre_jazz genre_country', 'poly_genre_genre_r&b^2', 'poly_genre_genre_r&b genre_soul', 'poly_genre_genre_r&b genre_metal', 'poly_genre_genre_r&b genre_classic', 'poly_genre_genre_r&b genre_country', 'poly_genre_genre_soul^2', 'poly_genre_genre_soul genre_metal', 'poly_genre_genre_soul genre_classic', 'poly_genre_genre_soul genre_country', 'poly_genre_genre_metal^2', 'poly_genre_genre_metal genre_classic', 'poly_genre_genre_metal genre_country', 'poly_genre_genre_classic^2', 'poly_genre_genre_classic genre_country', 'poly_genre_genre_country^2']
2025-06-01 17:33:45 - INFO - __main__ - Feature list saved to data/processed/feature_list.txt
2025-06-01 17:33:45 - INFO - __main__ - Engineered features saved to data/processed/features.csv

Test Command:
python -m pytest tests/test_features.py -v

Output:
================================================================= test session starts ==================================================================
platform darwin -- Python 3.10.17, pytest-8.3.5, pluggy-1.6.0 -- /opt/homebrew/Caskroom/miniconda/base/envs/mlops_group8/bin/python
cachedir: .pytest_cache
rootdir: /Users/adriansoto/Library/CloudStorage/GoogleDrive-adrian.soto6@gmail.com/My Drive/Maestria/Academics/Term 3/MLOps/mlops_group8
configfile: pytest.ini
plugins: dotenv-0.5.2, cov-6.1.1
collected 6 items                                                                                                                                      

tests/test_features.py::test_parse_genres_creates_columns PASSED                                                                                 [ 16%]
tests/test_features.py::test_drop_irrelevant_columns_removes PASSED                                                                              [ 33%]
tests/test_features.py::test_create_polynomial_features_adds_columns PASSED                                                                      [ 50%]
tests/test_features.py::test_select_features_excludes_and_profiles PASSED                                                                        [ 66%]
tests/test_features.py::test_log_feature_list_creates_file PASSED                                                                                [ 83%]
tests/test_features.py::test_main_features_e2e PASSED                                                                                            [100%]

================================================================== 6 passed in 13.56s ==================================================================

## Preprocessing Pipeline:

Commmand:
python -m src.preprocess.preprocessing

Output:
2025-06-01 17:35:08,002 - INFO - __main__ - Loading configuration from: config.yaml
2025-06-01 17:35:08,011 - INFO - __main__ - Configuration loaded successfully.
2025-06-01 17:35:08,011 - INFO - __main__ - Validating preprocessing configuration.
2025-06-01 17:35:08,011 - INFO - __main__ - Preprocessing configuration validation successful.
2025-06-01 17:35:08,011 - INFO - __main__ - Attempting to load raw data from: data/raw/Songs_2025.csv (type: csv)
2025-06-01 17:35:08,016 - INFO - __main__ - Raw data loaded successfully. Shape: (2300, 19)
2025-06-01 17:35:08,016 - INFO - __main__ - Starting data validation (placeholder step)...
2025-06-01 17:35:08,016 - INFO - __main__ - Data validation (placeholder step) complete.
2025-06-01 17:35:08,016 - INFO - __main__ - Dropping columns: ['instrumentalness']
2025-06-01 17:35:08,017 - INFO - __main__ - Shape after dropping columns: (2300, 18)
2025-06-01 17:35:08,017 - INFO - __main__ - Starting outlier removal for features: ['duration_ms', 'track_popularity'] with IQR multiplier: 1.5
2025-06-01 17:35:08,018 - INFO - __main__ - Outlier removal on 'duration_ms': 78 rows removed. Range: [131523.75, 314605.75]
2025-06-01 17:35:08,018 - INFO - __main__ - Outlier removal on 'track_popularity': 52 rows removed. Range: [46.50, 98.50]
2025-06-01 17:35:08,018 - INFO - __main__ - Total rows removed after outlier processing: 130
2025-06-01 17:35:08,018 - INFO - __main__ - Shape after outlier removal: (2170, 18)
2025-06-01 17:35:08,018 - INFO - __main__ - Scaling columns ['danceability', 'energy', 'loudness', 'speechiness', 'acousticness', 'liveness', 'valence', 'tempo', 'duration_ms', 'key'] with 'minmax' method.
2025-06-01 17:35:08,020 - INFO - __main__ - Scaling complete.
2025-06-01 17:35:08,036 - INFO - __main__ - Processed data saved to: ./data/processed/Songs_2025_processed.csv | Shape: (2170, 18)
2025-06-01 17:35:08,037 - INFO - __main__ - Preprocessing artifact (scaler) saved to: models/preprocessing_pipeline.pkl
2025-06-01 17:35:08,037 - INFO - __main__ - Preprocessing pipeline finished.

Test Command:
python -m pytest tests/test_preprocessing.py -v

Output:
================================================================= test session starts ==================================================================
platform darwin -- Python 3.12.2, pytest-8.3.5, pluggy-1.5.0 -- /opt/homebrew/Caskroom/miniconda/base/bin/python
cachedir: .pytest_cache
rootdir: /Users/adriansoto/Library/CloudStorage/GoogleDrive-adrian.soto6@gmail.com/My Drive/Maestria/Academics/Term 3/MLOps/mlops_group8
configfile: pytest.ini
plugins: anyio-4.9.0
collected 6 items                                                                                                                                      

tests/test_preprocessing.py::test_validate_preprocessing_config_raises_for_missing_top_level_keys PASSED                                         [ 16%]
tests/test_preprocessing.py::test_validate_preprocessing_config_warns_missing_sub_keys PASSED                                                    [ 33%]
tests/test_preprocessing.py::test_drop_columns_removes_specified PASSED                                                                          [ 50%]
tests/test_preprocessing.py::test_remove_outliers_iqr_removes_rows PASSED                                                                        [ 66%]
tests/test_preprocessing.py::test_scale_columns_minmax PASSED                                                                                    [ 83%]
tests/test_preprocessing.py::test_main_preprocessing_e2e PASSED                                                                                  [100%]

================================================================== 6 passed in 0.95s ===================================================================

## Model

Command:
python -m src.model.model

Output:
2025-06-01 17:53:25,958 - INFO - __main__.load_config - Loading configuration from: config.yaml
2025-06-01 17:53:25,964 - INFO - __main__.load_config - Configuration loaded successfully.
2025-06-01 17:53:25,964 - INFO - __main__ - Validating modeling configuration.
2025-06-01 17:53:25,964 - INFO - __main__ - Modeling configuration validation successful.
2025-06-01 17:53:25,964 - INFO - __main__ - Loading features (X) from: data/processed/features.csv
2025-06-01 17:53:25,987 - INFO - __main__ - Features (X) loaded. Shape: (2170, 165)
2025-06-01 17:53:25,987 - INFO - __main__ - Loading data for target variable 'track_popularity' from: ./data/processed/Songs_2025_processed.csv
2025-06-01 17:53:25,992 - INFO - __main__ - Target variable (y) 'track_popularity' loaded. Length: 2170
2025-06-01 17:53:25,992 - INFO - __main__ - Final X shape: (2170, 165), Final y length: 2170
2025-06-01 17:53:25,992 - INFO - __main__ - Splitting data: test_size=0.2, random_state=42
2025-06-01 17:53:25,993 - INFO - __main__ - Data split complete: X_train: (1736, 165), X_test: (434, 165), y_train: (1736,), y_test: (434,)
2025-06-01 17:53:25,994 - INFO - __main__ - Performing stepwise feature selection for linear regression.
2025-06-01 17:53:25,994 - INFO - __main__ - Starting stepwise selection: threshold_in=0.05, threshold_out=0.1
2025-06-01 17:53:26,076 - INFO - __main__ - Stepwise Add: Feature 'poly_audio_artist_popularity', p-value 0.0000
2025-06-01 17:53:26,165 - INFO - __main__ - Stepwise Add: Feature 'poly_audio_energy duration_ms', p-value 0.0000
2025-06-01 17:53:26,260 - INFO - __main__ - Stepwise Add: Feature 'genre_metal', p-value 0.0000
2025-06-01 17:53:26,368 - INFO - __main__ - Stepwise Add: Feature 'poly_genre_genre_metal', p-value 0.0000
2025-06-01 17:53:26,578 - INFO - __main__ - Stepwise Add: Feature 'poly_genre_genre_metal^2', p-value 0.0000
2025-06-01 17:53:26,854 - INFO - __main__ - Stepwise Add: Feature 'poly_genre_genre_hip-hop genre_r&b', p-value 0.0000
2025-06-01 17:53:27,270 - INFO - __main__ - Stepwise Add: Feature 'poly_genre_genre_indie^2', p-value 0.0005
2025-06-01 17:53:27,941 - INFO - __main__ - Stepwise Add: Feature 'poly_genre_genre_indie', p-value 0.0005
2025-06-01 17:53:28,200 - INFO - __main__ - Stepwise Add: Feature 'genre_indie', p-value 0.0005
2025-06-01 17:53:28,444 - INFO - __main__ - Stepwise Add: Feature 'poly_audio_speechiness valence', p-value 0.0165
2025-06-01 17:53:28,738 - INFO - __main__ - Stepwise Add: Feature 'poly_genre_genre_pop', p-value 0.0124
2025-06-01 17:53:29,224 - INFO - __main__ - Stepwise Add: Feature 'poly_genre_genre_rock genre_classic', p-value 0.0096
2025-06-01 17:53:29,662 - INFO - __main__ - Stepwise Add: Feature 'genre_pop', p-value 0.0067
2025-06-01 17:53:30,019 - INFO - __main__ - Stepwise Add: Feature 'poly_genre_genre_pop^2', p-value 0.0067
2025-06-01 17:53:30,358 - INFO - __main__ - Stepwise Add: Feature 'poly_audio_artist_popularity^2', p-value 0.0161
2025-06-01 17:53:30,724 - INFO - __main__ - Stepwise Add: Feature 'poly_audio_danceability valence', p-value 0.0283
2025-06-01 17:53:31,114 - INFO - __main__ - Stepwise Add: Feature 'acousticness', p-value 0.0122
2025-06-01 17:53:31,501 - INFO - __main__ - Stepwise Add: Feature 'speechiness', p-value 0.0327
2025-06-01 17:53:31,959 - INFO - __main__ - Stepwise Add: Feature 'poly_audio_speechiness artist_popularity', p-value 0.0303
2025-06-01 17:53:32,524 - INFO - __main__ - Stepwise Add: Feature 'poly_audio_speechiness', p-value 0.0042
2025-06-01 17:53:33,088 - INFO - __main__ - Stepwise selection completed. Selected features (20): ['poly_audio_artist_popularity', 'poly_audio_energy duration_ms', 'genre_metal', 'poly_genre_genre_metal', 'poly_genre_genre_metal^2', 'poly_genre_genre_hip-hop genre_r&b', 'poly_genre_genre_indie^2', 'poly_genre_genre_indie', 'genre_indie', 'poly_audio_speechiness valence', 'poly_genre_genre_pop', 'poly_genre_genre_rock genre_classic', 'genre_pop', 'poly_genre_genre_pop^2', 'poly_audio_artist_popularity^2', 'poly_audio_danceability valence', 'acousticness', 'speechiness', 'poly_audio_speechiness artist_popularity', 'poly_audio_speechiness']
2025-06-01 17:53:33,098 - INFO - __main__ - Linear regression fitted using 20 features.
2025-06-01 17:53:33,107 - INFO - __main__ - Evaluating 'linear_regression' model on test set...
2025-06-01 17:53:33,110 - INFO - src.evaluation.evaluator - Regression Evaluation Metrics for 'test' split: {'mse': 56.8507, 'rmse': 7.5399, 'mae': 5.9806, 'r2': 0.2722, 'mape': 8.6809, 'adj_r2': 0.2369}
2025-06-01 17:53:33,110 - INFO - __main__ - Saving model artifacts...
2025-06-01 17:53:33,112 - INFO - __main__ - Trained model 'linear_regression' saved to: models/linear_regression.pkl
2025-06-01 17:53:33,112 - INFO - __main__ - Selected features list saved to: models/linear_regression_selected_features.json
2025-06-01 17:53:33,112 - INFO - __main__ - Evaluation metrics saved to: models/metrics.json
2025-06-01 17:53:33,112 - INFO - __main__ - Modeling pipeline for 'linear_regression' completed successfully.
2025-06-01 17:53:33,112 - INFO - __main__ - Final saved metrics (raw): {'mse': 56.85068864339584, 'rmse': 7.539939564969725, 'mae': 5.980608013579005, 'r2': 0.27215154683272513, 'mape': 8.680910511096341, 'adj_r2': 0.2369046483742614}

Test Command:
python -m pytest tests/test_model.py -v

Output:
================================================================= test session starts ==================================================================
platform darwin -- Python 3.12.2, pytest-8.3.5, pluggy-1.5.0 -- /opt/homebrew/Caskroom/miniconda/base/bin/python
cachedir: .pytest_cache
rootdir: /Users/adriansoto/Library/CloudStorage/GoogleDrive-adrian.soto6@gmail.com/My Drive/Maestria/Academics/Term 3/MLOps/mlops_group8
configfile: pytest.ini
plugins: anyio-4.9.0
collected 4 items                                                                                                                                      

tests/test_model.py::test_validate_modeling_config_raises_keyerror PASSED                                                                        [ 25%]
tests/test_model.py::test_stepwise_selection_selects_relevant_features PASSED                                                                    [ 50%]
tests/test_model.py::test_train_linear_regression_returns_model_and_features PASSED                                                              [ 75%]
tests/test_model.py::test_main_modeling_e2e PASSED                                                                                               [100%]

================================================================== 4 passed in 1.35s ===================================================================

## Evaluator
##Only test available for this script

Test Command:
python -m pytest tests/test_evaluator.py -v

Output:
================================================================= test session starts ==================================================================
platform darwin -- Python 3.12.2, pytest-8.3.5, pluggy-1.5.0 -- /opt/homebrew/Caskroom/miniconda/base/bin/python
cachedir: .pytest_cache
rootdir: /Users/adriansoto/Library/CloudStorage/GoogleDrive-adrian.soto6@gmail.com/My Drive/Maestria/Academics/Term 3/MLOps/mlops_group8
configfile: pytest.ini
plugins: anyio-4.9.0
collected 16 items                                                                                                                                     

tests/test_evaluator.py::test_calculate_mape_basic PASSED                                                                                        [  6%]
tests/test_evaluator.py::test_calculate_mape_with_zeros_in_true PASSED                                                                           [ 12%]
tests/test_evaluator.py::test_calculate_mape_all_zeros_in_true PASSED                                                                            [ 18%]
tests/test_evaluator.py::test_calculate_mape_empty_input PASSED                                                                                  [ 25%]
tests/test_evaluator.py::test_round_metrics_dict_basic PASSED                                                                                    [ 31%]
tests/test_evaluator.py::test_round_metrics_dict_nested PASSED                                                                                   [ 37%]
tests/test_evaluator.py::test_calculate_regression_metrics_basic PASSED                                                                          [ 43%]
tests/test_evaluator.py::test_calculate_regression_metrics_perfect_fit PASSED                                                                    [ 50%]
tests/test_evaluator.py::test_calculate_regression_metrics_adj_r2_edge_case PASSED                                                               [ 56%]
tests/test_evaluator.py::test_calculate_regression_metrics_value_error_length_mismatch PASSED                                                    [ 62%]
tests/test_evaluator.py::test_calculate_regression_metrics_empty_input PASSED                                                                    [ 68%]
tests/test_evaluator.py::test_evaluate_statsmodels_model_runs_and_returns_metrics PASSED                                                         [ 75%]
tests/test_evaluator.py::test_evaluate_statsmodels_model_no_selected_features PASSED                                                             [ 81%]
tests/test_evaluator.py::test_evaluate_statsmodels_model_empty_eval_data PASSED                                                                  [ 87%]
tests/test_evaluator.py::test_evaluate_statsmodels_model_index_mismatch PASSED                                                                   [ 93%]
tests/test_evaluator.py::test_evaluate_statsmodels_model_prediction_error PASSED                                                                 [100%]

================================================================== 16 passed in 1.28s ==================================================================

## Inference

Running With Holdout Data:
python -m src.inference.inferencer data/raw_holdout/inference_holdout_data.csv config.yaml data/predictions/holdout_set_predictions.csv

Output:
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Starting batch inference process...
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Using configuration from: config.yaml
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Successfully loaded Scaler (using joblib) from models/preprocessing_pipeline.pkl
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Successfully loaded Trained Model (using pickle) from models/linear_regression.pkl
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Successfully loaded Selected Features List from models/linear_regression_selected_features.json
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Loading new input data from: data/raw_holdout/inference_holdout_data.csv
2025-06-01 19:01:24 - INFO - __main__ - inferencer - New data loaded. Shape: (230, 19)
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Applying initial preprocessing transformations...
2025-06-01 19:01:24 - INFO - __main__ - preprocessing - Dropping columns: ['instrumentalness']
2025-06-01 19:01:24 - INFO - __main__ - preprocessing - Shape after dropping columns: (230, 18)
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Applying scaler to columns: ['danceability', 'energy', 'loudness', 'speechiness', 'acousticness', 'liveness', 'valence', 'tempo', 'duration_ms', 'key']
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Applying feature engineering transformations...
2025-06-01 19:01:24 - INFO - __main__ - features - Parsing and engineering genre features...
2025-06-01 19:01:24 - INFO - __main__ - features - Created genre feature: genre_pop
2025-06-01 19:01:24 - INFO - __main__ - features - Created genre feature: genre_rock
2025-06-01 19:01:24 - INFO - __main__ - features - Created genre feature: genre_electronic
2025-06-01 19:01:24 - INFO - __main__ - features - Created genre feature: genre_latin
2025-06-01 19:01:24 - INFO - __main__ - features - Created genre feature: genre_hip-hop
2025-06-01 19:01:24 - INFO - __main__ - features - Created genre feature: genre_indie
2025-06-01 19:01:24 - INFO - __main__ - features - Created genre feature: genre_jazz
2025-06-01 19:01:24 - INFO - __main__ - features - Created genre feature: genre_r&b
2025-06-01 19:01:24 - INFO - __main__ - features - Created genre feature: genre_soul
2025-06-01 19:01:24 - INFO - __main__ - features - Created genre feature: genre_metal
2025-06-01 19:01:24 - INFO - __main__ - features - Created genre feature: genre_classic
2025-06-01 19:01:24 - INFO - __main__ - features - Created genre feature: genre_country
2025-06-01 19:01:24 - INFO - __main__ - features - Dropping irrelevant columns: ['track_name', 'album', 'artist_name', 'cluster', 'artist_genres']
2025-06-01 19:01:24 - INFO - __main__ - features - Created polynomial audio features: ['poly_audio_danceability', 'poly_audio_energy', 'poly_audio_liveness', 'poly_audio_loudness', 'poly_audio_speechiness', 'poly_audio_tempo', 'poly_audio_valence', 'poly_audio_duration_ms', 'poly_audio_artist_popularity', 'poly_audio_danceability^2', 'poly_audio_danceability energy', 'poly_audio_danceability liveness', 'poly_audio_danceability loudness', 'poly_audio_danceability speechiness', 'poly_audio_danceability tempo', 'poly_audio_danceability valence', 'poly_audio_danceability duration_ms', 'poly_audio_danceability artist_popularity', 'poly_audio_energy^2', 'poly_audio_energy liveness', 'poly_audio_energy loudness', 'poly_audio_energy speechiness', 'poly_audio_energy tempo', 'poly_audio_energy valence', 'poly_audio_energy duration_ms', 'poly_audio_energy artist_popularity', 'poly_audio_liveness^2', 'poly_audio_liveness loudness', 'poly_audio_liveness speechiness', 'poly_audio_liveness tempo', 'poly_audio_liveness valence', 'poly_audio_liveness duration_ms', 'poly_audio_liveness artist_popularity', 'poly_audio_loudness^2', 'poly_audio_loudness speechiness', 'poly_audio_loudness tempo', 'poly_audio_loudness valence', 'poly_audio_loudness duration_ms', 'poly_audio_loudness artist_popularity', 'poly_audio_speechiness^2', 'poly_audio_speechiness tempo', 'poly_audio_speechiness valence', 'poly_audio_speechiness duration_ms', 'poly_audio_speechiness artist_popularity', 'poly_audio_tempo^2', 'poly_audio_tempo valence', 'poly_audio_tempo duration_ms', 'poly_audio_tempo artist_popularity', 'poly_audio_valence^2', 'poly_audio_valence duration_ms', 'poly_audio_valence artist_popularity', 'poly_audio_duration_ms^2', 'poly_audio_duration_ms artist_popularity', 'poly_audio_artist_popularity^2']
2025-06-01 19:01:24 - INFO - __main__ - features - Created polynomial genre features: ['poly_genre_genre_pop', 'poly_genre_genre_rock', 'poly_genre_genre_electronic', 'poly_genre_genre_latin', 'poly_genre_genre_hip-hop', 'poly_genre_genre_indie', 'poly_genre_genre_jazz', 'poly_genre_genre_r&b', 'poly_genre_genre_soul', 'poly_genre_genre_metal', 'poly_genre_genre_classic', 'poly_genre_genre_country', 'poly_genre_genre_pop^2', 'poly_genre_genre_pop genre_rock', 'poly_genre_genre_pop genre_electronic', 'poly_genre_genre_pop genre_latin', 'poly_genre_genre_pop genre_hip-hop', 'poly_genre_genre_pop genre_indie', 'poly_genre_genre_pop genre_jazz', 'poly_genre_genre_pop genre_r&b', 'poly_genre_genre_pop genre_soul', 'poly_genre_genre_pop genre_metal', 'poly_genre_genre_pop genre_classic', 'poly_genre_genre_pop genre_country', 'poly_genre_genre_rock^2', 'poly_genre_genre_rock genre_electronic', 'poly_genre_genre_rock genre_latin', 'poly_genre_genre_rock genre_hip-hop', 'poly_genre_genre_rock genre_indie', 'poly_genre_genre_rock genre_jazz', 'poly_genre_genre_rock genre_r&b', 'poly_genre_genre_rock genre_soul', 'poly_genre_genre_rock genre_metal', 'poly_genre_genre_rock genre_classic', 'poly_genre_genre_rock genre_country', 'poly_genre_genre_electronic^2', 'poly_genre_genre_electronic genre_latin', 'poly_genre_genre_electronic genre_hip-hop', 'poly_genre_genre_electronic genre_indie', 'poly_genre_genre_electronic genre_jazz', 'poly_genre_genre_electronic genre_r&b', 'poly_genre_genre_electronic genre_soul', 'poly_genre_genre_electronic genre_metal', 'poly_genre_genre_electronic genre_classic', 'poly_genre_genre_electronic genre_country', 'poly_genre_genre_latin^2', 'poly_genre_genre_latin genre_hip-hop', 'poly_genre_genre_latin genre_indie', 'poly_genre_genre_latin genre_jazz', 'poly_genre_genre_latin genre_r&b', 'poly_genre_genre_latin genre_soul', 'poly_genre_genre_latin genre_metal', 'poly_genre_genre_latin genre_classic', 'poly_genre_genre_latin genre_country', 'poly_genre_genre_hip-hop^2', 'poly_genre_genre_hip-hop genre_indie', 'poly_genre_genre_hip-hop genre_jazz', 'poly_genre_genre_hip-hop genre_r&b', 'poly_genre_genre_hip-hop genre_soul', 'poly_genre_genre_hip-hop genre_metal', 'poly_genre_genre_hip-hop genre_classic', 'poly_genre_genre_hip-hop genre_country', 'poly_genre_genre_indie^2', 'poly_genre_genre_indie genre_jazz', 'poly_genre_genre_indie genre_r&b', 'poly_genre_genre_indie genre_soul', 'poly_genre_genre_indie genre_metal', 'poly_genre_genre_indie genre_classic', 'poly_genre_genre_indie genre_country', 'poly_genre_genre_jazz^2', 'poly_genre_genre_jazz genre_r&b', 'poly_genre_genre_jazz genre_soul', 'poly_genre_genre_jazz genre_metal', 'poly_genre_genre_jazz genre_classic', 'poly_genre_genre_jazz genre_country', 'poly_genre_genre_r&b^2', 'poly_genre_genre_r&b genre_soul', 'poly_genre_genre_r&b genre_metal', 'poly_genre_genre_r&b genre_classic', 'poly_genre_genre_r&b genre_country', 'poly_genre_genre_soul^2', 'poly_genre_genre_soul genre_metal', 'poly_genre_genre_soul genre_classic', 'poly_genre_genre_soul genre_country', 'poly_genre_genre_metal^2', 'poly_genre_genre_metal genre_classic', 'poly_genre_genre_metal genre_country', 'poly_genre_genre_classic^2', 'poly_genre_genre_classic genre_country', 'poly_genre_genre_country^2']
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Shape after feature engineering: (230, 170)
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Selecting final features for prediction: ['genre_pop', 'poly_genre_genre_latin genre_hip-hop']
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Reordered inference columns to match model's exog_names.
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Prepared data for prediction. Shape: (230, 3)
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Generating predictions and 95% prediction intervals...
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Predictions and intervals merged. Output shape: (230, 22)
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Writing predictions to: data/predictions/holdout_set_predictions.csv
2025-06-01 19:01:24 - INFO - __main__ - inferencer - Inference complete. Predictions and intervals saved.

Test Command:
pytest tests/test_inferencer.py -v

Output
======================================================== test session starts =========================================================
platform darwin -- Python 3.12.2, pytest-8.3.5, pluggy-1.5.0 -- /opt/homebrew/Caskroom/miniconda/base/bin/python
cachedir: .pytest_cache
rootdir: /Users/adriansoto/Library/CloudStorage/GoogleDrive-adrian.soto6@gmail.com/My Drive/Maestria/Academics/Term 3/MLOps/mlops_group8
configfile: pytest.ini
plugins: anyio-4.9.0
collected 1 item                                                                                                                     

tests/test_inferencer.py::test_run_inference_successful PASSED                                                                 [100%]

========================================================= 1 passed in 2.40s ==========================================================